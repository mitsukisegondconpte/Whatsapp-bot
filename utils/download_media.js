const a4_0x1a0fda=a4_0x1e3e;(function(_0x480ffd,_0x4a932a){const _0x581f01=a4_0x1e3e,_0x18be7d=_0x480ffd();while(!![]){try{const _0x1eaee9=parseInt(_0x581f01(0x1fb))/0x1*(parseInt(_0x581f01(0x1f8))/0x2)+-parseInt(_0x581f01(0x20b))/0x3*(-parseInt(_0x581f01(0x21c))/0x4)+-parseInt(_0x581f01(0x228))/0x5+parseInt(_0x581f01(0x21e))/0x6+-parseInt(_0x581f01(0x231))/0x7*(-parseInt(_0x581f01(0x218))/0x8)+parseInt(_0x581f01(0x219))/0x9*(-parseInt(_0x581f01(0x1fa))/0xa)+parseInt(_0x581f01(0x233))/0xb;if(_0x1eaee9===_0x4a932a)break;else _0x18be7d['push'](_0x18be7d['shift']());}catch(_0x3cc8d2){_0x18be7d['push'](_0x18be7d['shift']());}}}(a4_0x3182,0xe8c61));import{downloadMediaMessage}from'baileys-x';import{createWriteStream,existsSync,mkdirSync}from'fs';import{pipeline}from'stream/promises';import{join,extname}from'path';import a4_0x1ea815 from'pino';import a4_0x405f40 from'dotenv';import{log}from'console';function a4_0x1e3e(_0xed0794,_0x22eb14){const _0x318252=a4_0x3182();return a4_0x1e3e=function(_0x1e3e8d,_0x6c3d8c){_0x1e3e8d=_0x1e3e8d-0x1f1;let _0x163c56=_0x318252[_0x1e3e8d];return _0x163c56;},a4_0x1e3e(_0xed0794,_0x22eb14);}const logger=a4_0x1ea815({'level':a4_0x1a0fda(0x221),'transport':{'target':'pino-pretty','options':{'colorize':!![],'ignore':'pid,hostname','translateTime':'HH:MM:ss','includeStack':!![],'errorLikeObjectKeys':[a4_0x1a0fda(0x232),a4_0x1a0fda(0x227)]}},'base':null}),MIME_EXTENSIONS={'image/jpeg':a4_0x1a0fda(0x223),'image/png':'png','video/mp4':'mp4','audio/ogg':a4_0x1a0fda(0x205),'audio/mpeg':a4_0x1a0fda(0x226),'application/pdf':a4_0x1a0fda(0x236),'image/webp':a4_0x1a0fda(0x212)};a4_0x405f40[a4_0x1a0fda(0x22e)]();const mediaDir=process[a4_0x1a0fda(0x222)][a4_0x1a0fda(0x21d)];async function downloader_media(_0x1ecbcf,_0x4e6e16,_0x189616){const _0x2d41e9=a4_0x1a0fda,_0x1fc142={'TvtuY':function(_0x387f96,_0x56c125){return _0x387f96(_0x56c125);},'PAYkh':function(_0xbf0930,_0x47ae71,_0x13d9bc){return _0xbf0930(_0x47ae71,_0x13d9bc);},'zFGue':_0x2d41e9(0x20a),'MdZqU':function(_0x17c624,_0x37aadf,_0x26961a,_0x694c85,_0x1398f3){return _0x17c624(_0x37aadf,_0x26961a,_0x694c85,_0x1398f3);},'rpVZX':_0x2d41e9(0x235),'MklyT':function(_0x32c7e7,_0x2c2674,_0x314a18){return _0x32c7e7(_0x2c2674,_0x314a18);},'DUmyq':function(_0x1f2966,_0x19e58b){return _0x1f2966(_0x19e58b);}};try{!_0x1fc142[_0x2d41e9(0x20e)](existsSync,mediaDir)&&(_0x1fc142['PAYkh'](mkdirSync,mediaDir,{'recursive':!![]}),logger['debug']('Dossier\x20créé:\x20'+mediaDir));if(!_0x1fc142[_0x2d41e9(0x20e)](isMediaMessage,_0x4e6e16))return logger[_0x2d41e9(0x1fc)](_0x1fc142[_0x2d41e9(0x208)]),null;logger['info'](_0x2d41e9(0x210)+(_0x4e6e16['pushName']||_0x2d41e9(0x229)));const _0x5a48ff=await _0x1fc142[_0x2d41e9(0x1f9)](downloadMediaMessage,_0x4e6e16,_0x1fc142[_0x2d41e9(0x1fd)],{},{'reuploadRequest':_0x1ecbcf[_0x2d41e9(0x225)]}),{fileExt:_0x476b0d,mediaType:_0x523b0c}=getMediaInfo(_0x4e6e16),_0x193a2f=(_0x189616||Date[_0x2d41e9(0x21f)]())+'_'+_0x523b0c+'.'+_0x476b0d,_0x332c61=_0x1fc142['MklyT'](join,mediaDir,_0x193a2f);return await _0x1fc142[_0x2d41e9(0x22f)](pipeline,_0x5a48ff,_0x1fc142[_0x2d41e9(0x1f4)](createWriteStream,_0x332c61)),logger['info'](_0x2d41e9(0x238)+_0x193a2f),{'chemin':_0x193a2f,'type':_0x523b0c,'fullPath':_0x332c61};}catch(_0x1838fa){logger[_0x2d41e9(0x227)](_0x2d41e9(0x1f3)+_0x1838fa['message']);throw new Error(_0x2d41e9(0x1f5)+_0x1838fa['message']);}}function a4_0x3182(){const _0x4156bc=['plHXd','document','4KJSIfU','MEDIA_PATH','776190xFaHMR','now','gif','debug','env','jpg','webm','updateMediaMessage','mp3','error','8906420aQLgqi','inconnu','imageMessage','BvZmK','isAnimated','video','config','MklyT','message','3869866gVEwBS','err','12822205fEhxTw','extendedTextMessage','stream','pdf','documentMessage','Média\x20sauvegardé:\x20','Type\x20média\x20détecté:\x20','pkojq','wCLkZ','Erreur\x20téléchargement:\x20','DUmyq','Échec\x20du\x20téléchargement:\x20','Jajtf','audioMessage','2514oPLjso','MdZqU','10MUYhca','466bKvbOE','warn','rpVZX','pNcfT','UTAfB',',\x20Extension:\x20','mimetype','quotedMessage',',\x20MIME:\x20','contextInfo','ogg','ISIBy','image','zFGue','jOwPZ','Tentative\x20de\x20téléchargement\x20sur\x20un\x20message\x20non\x20média','693915gMoXjB','unknown','videoMessage','TvtuY','ZsvxO','Téléchargement\x20média\x20-\x20Expéditeur:\x20','stickerMessage','webp','sticker','wutWX','bin','ieXaW','audio','16ZfPBAL','4347342YomnRc'];a4_0x3182=function(){return _0x4156bc;};return a4_0x3182();}function isMediaMessage(_0x38aafa){const _0x3f9c3c=a4_0x1a0fda,_0x4a3d27={'ISIBy':function(_0x4380b2,_0x111f5b){return _0x4380b2(_0x111f5b);}};return _0x4a3d27[_0x3f9c3c(0x206)](Boolean,_0x38aafa['message']?.['imageMessage']||_0x38aafa[_0x3f9c3c(0x230)]?.['videoMessage']||_0x38aafa['message']?.['audioMessage']||_0x38aafa[_0x3f9c3c(0x230)]?.[_0x3f9c3c(0x237)]||_0x38aafa['message']?.[_0x3f9c3c(0x211)]||_0x38aafa['message']?.['extendedTextMessage']?.[_0x3f9c3c(0x204)]?.[_0x3f9c3c(0x202)]?.[_0x3f9c3c(0x22a)]);}function getMediaInfo(_0x21a31e){const _0x1eec71=a4_0x1a0fda,_0x4e2bbe={'Jajtf':_0x1eec71(0x20c),'ZsvxO':_0x1eec71(0x207),'pNcfT':_0x1eec71(0x220),'wutWX':_0x1eec71(0x217),'plHXd':_0x1eec71(0x21b),'BvZmK':_0x1eec71(0x213),'vRWxZ':function(_0x31f525,_0x14200f){return _0x31f525===_0x14200f;},'UTAfB':'mp4','pkojq':function(_0xaf6bcc,_0x56f356){return _0xaf6bcc===_0x56f356;},'jOwPZ':_0x1eec71(0x223),'ieXaW':function(_0x5e53aa,_0x10cdf1){return _0x5e53aa===_0x10cdf1;},'YqHso':_0x1eec71(0x215),'wCLkZ':function(_0x54d29a,_0x198c84){return _0x54d29a===_0x198c84;}},_0x4e98a9=_0x21a31e[_0x1eec71(0x230)];let _0x5dac81=_0x4e2bbe[_0x1eec71(0x1f6)],_0x288835='',_0x5619db='';if(_0x4e98a9[_0x1eec71(0x22a)])_0x5dac81=_0x4e2bbe[_0x1eec71(0x20f)],_0x288835=_0x4e98a9[_0x1eec71(0x22a)][_0x1eec71(0x201)];else{if(_0x4e98a9[_0x1eec71(0x20d)]?.['gifPlayback'])_0x5dac81=_0x4e2bbe[_0x1eec71(0x1fe)],_0x288835=_0x4e98a9[_0x1eec71(0x20d)][_0x1eec71(0x201)];else{if(_0x4e98a9[_0x1eec71(0x1f7)])_0x5dac81=_0x4e2bbe[_0x1eec71(0x214)],_0x288835=_0x4e98a9[_0x1eec71(0x1f7)][_0x1eec71(0x201)];else{if(_0x4e98a9[_0x1eec71(0x237)])_0x5dac81=_0x4e2bbe[_0x1eec71(0x21a)],_0x288835=_0x4e98a9[_0x1eec71(0x237)][_0x1eec71(0x201)],_0x5619db=_0x4e98a9[_0x1eec71(0x237)]['fileName'];else{if(_0x4e98a9['stickerMessage'])_0x5dac81=_0x4e2bbe[_0x1eec71(0x22b)],_0x288835=_0x4e98a9[_0x1eec71(0x211)][_0x1eec71(0x201)];else{if(_0x4e98a9['videoMessage'])_0x5dac81=_0x1eec71(0x22d),_0x288835=_0x4e98a9[_0x1eec71(0x20d)][_0x1eec71(0x201)];else{if(_0x4e98a9['extendedTextMessage']?.[_0x1eec71(0x204)]?.[_0x1eec71(0x202)])return getMediaInfo({'message':_0x4e98a9[_0x1eec71(0x234)][_0x1eec71(0x204)][_0x1eec71(0x202)]});}}}}}}let _0x6eb63e;if(_0x4e2bbe['vRWxZ'](_0x5dac81,_0x1eec71(0x22d))||_0x4e2bbe['vRWxZ'](_0x5dac81,_0x1eec71(0x220)))_0x6eb63e=_0x4e2bbe[_0x1eec71(0x1ff)];else{if(_0x4e2bbe[_0x1eec71(0x1f1)](_0x5dac81,_0x4e2bbe[_0x1eec71(0x20f)]))_0x6eb63e=_0x4e2bbe[_0x1eec71(0x209)];else{if(_0x4e2bbe['pkojq'](_0x5dac81,_0x4e2bbe[_0x1eec71(0x214)]))_0x6eb63e=_0x1eec71(0x205);else _0x4e2bbe[_0x1eec71(0x216)](_0x5dac81,_0x4e2bbe[_0x1eec71(0x21a)])&&!_0x6eb63e&&(_0x6eb63e=_0x4e2bbe['YqHso']);}}return _0x4e2bbe[_0x1eec71(0x1f2)](_0x5dac81,_0x4e2bbe[_0x1eec71(0x22b)])&&(_0x6eb63e=_0x4e98a9['stickerMessage'][_0x1eec71(0x22c)]?_0x1eec71(0x224):_0x1eec71(0x212)),logger[_0x1eec71(0x221)](_0x1eec71(0x239)+_0x5dac81+_0x1eec71(0x203)+_0x288835+_0x1eec71(0x200)+_0x6eb63e),{'fileExt':_0x6eb63e,'mediaType':_0x5dac81};}export default downloader_media;